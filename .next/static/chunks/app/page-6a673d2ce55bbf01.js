(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7040:function(e,t,r){Promise.resolve().then(r.bind(r,1206))},1206:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return et}});var s=r(7437),a=r(2265),n=r(4822),i=r(9291),l=r(8736),o=r(91),d=r(8728);let c=e=>{let{currentView:t,onNavigate:r}=e;return(0,s.jsxs)("nav",{className:"w-16 flex flex-col items-center py-6 bg-sidebar-bg",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(n.Z,{className:"w-8 h-8 text-sidebar-textActive",strokeWidth:1.5})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col space-y-2 w-full px-2",children:[(0,s.jsx)(x,{icon:(0,s.jsx)(i.Z,{size:20}),active:"dashboard"===t,onClick:()=>r("dashboard"),tooltip:"ダッシュボード"}),(0,s.jsx)(x,{icon:(0,s.jsx)(l.Z,{size:20}),active:"editor"===t,onClick:()=>r("editor"),tooltip:"レポート確認"}),(0,s.jsx)(x,{icon:(0,s.jsx)(o.Z,{size:20}),active:"data-entry"===t,onClick:()=>r("data-entry"),tooltip:"データ入力"}),(0,s.jsx)(x,{icon:(0,s.jsx)(d.Z,{size:20}),active:"settings"===t,onClick:()=>r("settings"),tooltip:"設定"})]}),(0,s.jsx)("div",{className:"mt-auto",children:(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-sidebar-active flex items-center justify-center text-xs font-mono text-sidebar-textActive",children:"N"})})]})},x=e=>{let{icon:t,active:r,onClick:a,disabled:n,tooltip:i}=e;return(0,s.jsx)("button",{onClick:a,disabled:n,title:i,className:"w-full p-3 flex justify-center rounded-lg transition-all ".concat(r?"text-sidebar-textActive bg-sidebar-active":"text-sidebar-text hover:text-sidebar-textActive hover:bg-sidebar-hover"," ").concat(n?"opacity-40 cursor-not-allowed":""),children:t})};var u=r(9388),m=r(6865),b=r(1671);u.Z,m.Z,b.Z;var g=r(4401),p=r(6858),h=r(875),f=r(407);let v={critical:"border-l-severity-critical-text",warning:"border-l-severity-warning-text",healthy:"border-l-severity-success-text"},y={critical:"text-severity-critical-text",warning:"text-severity-warning-text",healthy:"text-severity-success-text"},j=e=>{let{data:t,level:r=0,onSelect:n}=e,[i,l]=(0,a.useState)(!0),o=v[t.status],d=y[t.status];return(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsxs)("div",{className:"\n          flex items-center py-2 px-3 mb-1 rounded cursor-pointer transition-all\n          ".concat(t.isTarget?"bg-background-layer3 border border-border-default":"hover:bg-background-layer3","\n          border-l-2 ").concat(o,"\n        "),onClick:()=>n(t),children:[(0,s.jsx)("div",{className:"mr-2 text-foreground-muted hover:text-foreground-primary",onClick:e=>{e.stopPropagation(),l(!i)},children:t.children?i?(0,s.jsx)(h.Z,{size:14}):(0,s.jsx)(f.Z,{size:14}):(0,s.jsx)("span",{className:"w-[14px]"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-mono text-sm font-medium text-foreground-primary",children:t.label}),(0,s.jsx)("span",{className:"font-mono text-xs ".concat(d),children:t.value})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,s.jsx)("span",{className:"text-xs text-foreground-muted",children:t.owner}),t.ambiguityScore>10&&(0,s.jsxs)("span",{className:"text-[10px] text-severity-warning-text font-mono bg-severity-warning-bg border border-severity-warning-border px-1.5 py-0.5 rounded",children:["AMB_SCORE: ",t.ambiguityScore]})]})]})]}),i&&t.children&&(0,s.jsx)("div",{className:"border-l border-border-subtle ml-2 pl-2",children:t.children.map(e=>(0,s.jsx)(j,{data:e,level:r+1,onSelect:n},e.id))})]})},N=e=>{let{kpiData:t,onNavigate:r}=e;return(0,s.jsxs)("div",{className:"h-full flex flex-col p-6 overflow-hidden",children:[(0,s.jsxs)("header",{className:"mb-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-light text-foreground-primary mb-1 flex items-center",children:[(0,s.jsx)(g.Z,{className:"mr-3 text-accent-text"}),"System Observability"]}),(0,s.jsxs)("p",{className:"text-foreground-muted text-sm font-mono",children:["STATUS: ",(0,s.jsx)("span",{className:"text-severity-warning-text",children:"DEGRADED"})," | AMBIGUITY LEVEL: HIGH"]})]}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-12 gap-6 overflow-hidden",children:[(0,s.jsxs)("div",{className:"col-span-8 bg-background-layer2 border border-border-default rounded-lg p-4 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-border-subtle",children:[(0,s.jsx)("h3",{className:"text-sm font-mono text-foreground-secondary",children:"LOGIC TREE VIEW"}),(0,s.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-severity-critical-text"}),(0,s.jsx)("span",{className:"text-[10px] text-foreground-muted",children:"CRITICAL"})]})]}),(0,s.jsx)(j,{data:t,onSelect:e=>{e.isTarget&&r("editor")}})]}),(0,s.jsx)("div",{className:"col-span-4 flex flex-col gap-4",children:(0,s.jsxs)("div",{className:"bg-background-layer2 border border-border-default rounded-lg p-4 flex-1",children:[(0,s.jsx)("h3",{className:"text-sm font-mono text-foreground-secondary mb-4",children:"CRITICAL ANOMALIES"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"p-3 rounded-lg cursor-pointer transition-colors group bg-severity-critical-bg border border-severity-critical-border hover:shadow-sm",onClick:()=>r("editor"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,s.jsx)("span",{className:"text-xs font-mono text-severity-critical-text",children:"VP of Sales / Ent Sales"}),(0,s.jsx)(p.Z,{className:"w-3 h-3 text-severity-critical-text opacity-0 group-hover:opacity-100 transition-opacity"})]}),(0,s.jsx)("p",{className:"text-sm text-foreground-primary mb-2",children:"売上見込みの根拠において、事実と解釈の混同率が45%を超えています。"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("span",{className:"text-[10px] bg-severity-critical-border text-severity-critical-text px-1.5 py-0.5 rounded font-medium",children:"FACT_MIXING"})})]}),(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-severity-warning-bg border border-severity-warning-border",children:[(0,s.jsx)("div",{className:"flex justify-between items-start mb-1",children:(0,s.jsx)("span",{className:"text-xs font-mono text-severity-warning-text",children:"PdM Group / Product Quality"})}),(0,s.jsx)("p",{className:"text-sm text-foreground-primary mb-2",children:"品質報告に数値データが欠落しています。"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("span",{className:"text-[10px] bg-severity-warning-border text-severity-warning-text px-1.5 py-0.5 rounded font-medium",children:"DATA_MISSING"})})]})]})]})})]})]})},w={indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},red:{500:"#ef4444",900:"#7f1d1d"},amber:{500:"#f59e0b",900:"#78350f"},emerald:{500:"#10b981",900:"#064e3b"}};w.indigo,w.slate;let k={shallow_analysis:"浅い分析",missing_coverage:"カバレッジ不足",lack_of_quantification:"定量化不足",unclear_action:"アクション不明確",fact_interpretation_mixing:"事実と解釈の混同"},C=e=>{let{auditLog:t,title:r="曖昧性チェック",className:a=""}=e,{items:n,openCount:i,score:l,filter:o,setFilter:d,dismiss:c,resolve:x,isProcessing:u}=t;return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-background-layer2 rounded-lg border border-border-default ".concat(a),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border-default",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-foreground-primary",children:r}),i>0&&(0,s.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-severity-critical-bg text-severity-critical-text border border-severity-critical-border",children:i})]}),(0,s.jsx)(S,{score:l})]}),(0,s.jsxs)("div",{className:"flex gap-2 p-3 border-b border-border-default",children:[(0,s.jsx)(A,{active:"open"===o.status,onClick:()=>d({...o,status:"open"}),children:"未解決"}),(0,s.jsx)(A,{active:"all"===o.status,onClick:()=>d({...o,status:"all"}),children:"すべて"}),(0,s.jsx)(A,{active:"resolved"===o.status,onClick:()=>d({...o,status:"resolved"}),children:"解決済み"})]}),u&&(0,s.jsx)("div",{className:"px-3 py-2 bg-accent-subtle border-b border-border-default",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-accent-text",children:[(0,s.jsx)(_,{}),(0,s.jsx)("span",{children:"処理中..."})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:0===n.length?(0,s.jsx)(I,{status:o.status}):n.map(e=>(0,s.jsx)(D,{item:e,onDismiss:t=>c(e.id,t),onResolve:()=>x(e.id),disabled:u},e.id))})]})},S=e=>{let{score:t}=e,r=t>=80?w.emerald[500]:t>=60?w.amber[500]:w.red[500];return(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full",style:{backgroundColor:"".concat(r,"20")},children:[(0,s.jsx)("span",{className:"text-sm font-medium",style:{color:r},children:t}),(0,s.jsx)("span",{className:"text-xs text-foreground-secondary",children:"/ 100"})]})},A=e=>{let{active:t,onClick:r,children:a}=e;return(0,s.jsx)("button",{onClick:r,className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(t?"bg-accent-primary text-foreground-inverse":"bg-background-layer3 text-foreground-secondary hover:text-foreground-primary"),children:a})},_=()=>(0,s.jsxs)("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),I=e=>{let{status:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-foreground-muted",children:[(0,s.jsx)("svg",{className:"w-12 h-12 mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"text-sm",children:"open"===t?"未解決の指摘はありません":"resolved"===t?"解決済みの指摘はありません":"指摘はありません"})]})},T=e=>{let{severity:t}=e;return"critical"===t?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):"warning"===t?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},D=e=>{let{item:t,onDismiss:r,onResolve:n,disabled:i}=e,[l,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(""),x={critical:"text-severity-critical-text bg-severity-critical-bg border-severity-critical-border",warning:"text-severity-warning-text bg-severity-warning-bg border-severity-warning-border",info:"text-severity-info-text bg-severity-info-bg border-severity-info-border",success:"text-severity-success-text bg-severity-success-bg border-severity-success-border"}[t.severity],u="open"===t.status,m=()=>{d.trim()&&(r(d.trim()),o(!1),c(""))},b=()=>{o(!1),c("")};return(0,s.jsxs)("div",{className:"p-4 rounded-xl border-2 transition-all ".concat(u?"bg-background-layer1 border-border-default hover:border-border-active hover:shadow-md":"bg-background-layer2 border-border-subtle opacity-60"," ").concat(i?"pointer-events-none opacity-50":""),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-bold border-2 ".concat(x),children:[(0,s.jsx)(T,{severity:t.severity}),(0,s.jsx)("span",{children:k[t.pattern]})]}),"open"!==t.status&&(0,s.jsx)("span",{className:"text-sm font-medium px-2 py-1 rounded ".concat("resolved"===t.status?"bg-severity-success-bg text-severity-success-text":"bg-background-layer3 text-foreground-muted"),children:"resolved"===t.status?"✓ 解決済み":"✗ 却下"})]}),(0,s.jsx)("p",{className:"text-base text-foreground-primary mb-3 leading-relaxed",children:t.message}),t.rationale&&(0,s.jsx)("div",{className:"mb-3 p-3 bg-background-layer2 rounded-lg border border-border-subtle",children:(0,s.jsxs)("p",{className:"text-sm text-foreground-secondary leading-relaxed",children:[(0,s.jsx)("span",{className:"font-medium text-foreground-muted",children:"理由: "}),t.rationale]})}),(0,s.jsx)("div",{className:"mb-4 p-3 bg-accent-subtle rounded-lg border border-accent-primary/30",children:(0,s.jsxs)("p",{className:"text-sm text-accent-text leading-relaxed",children:[(0,s.jsx)("span",{className:"font-bold",children:"\uD83D\uDCA1 提案: "}),t.suggestion]})}),u&&!l&&(0,s.jsxs)("div",{className:"flex gap-3 pt-2 border-t border-border-subtle",children:[(0,s.jsxs)("button",{onClick:n,disabled:i,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-bold rounded-lg bg-severity-success-bg text-severity-success-text border-2 border-severity-success-border hover:shadow-md hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:hover:scale-100",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"解決済みにする"]}),(0,s.jsxs)("button",{onClick:()=>o(!0),disabled:i,className:"flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium rounded-lg bg-background-elevated text-foreground-secondary border-2 border-border-default hover:border-foreground-muted hover:text-foreground-primary hover:shadow-sm active:scale-[0.98] transition-all disabled:opacity-50",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"却下"]})]}),u&&l&&(0,s.jsxs)("div",{className:"space-y-3 pt-3 border-t border-border-subtle",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-foreground-secondary",children:"却下理由を入力してください"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"例: 別途対応済み、仕様として許容 など",className:"w-full px-4 py-2.5 text-sm rounded-lg bg-background-layer1 border-2 border-border-default text-foreground-primary placeholder:text-foreground-muted focus:outline-none focus:border-accent-primary focus:ring-2 focus:ring-accent-primary/20",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&m(),"Escape"===e.key&&b()}}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:m,disabled:!d.trim()||i,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-bold rounded-lg bg-severity-warning-bg text-severity-warning-text border-2 border-severity-warning-border hover:shadow-md active:scale-[0.98] transition-all disabled:opacity-50",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"この指摘を却下する"]}),(0,s.jsx)("button",{onClick:b,className:"px-4 py-2.5 text-sm font-medium rounded-lg bg-background-elevated text-foreground-secondary border-2 border-border-default hover:text-foreground-primary transition-colors",children:"キャンセル"})]})]}),"dismissed"===t.status&&t.dismissReason&&(0,s.jsx)("div",{className:"mt-3 p-2 bg-background-layer3 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-foreground-muted",children:[(0,s.jsx)("span",{className:"font-medium",children:"却下理由:"})," ",t.dismissReason]})})]})},L=e=>{let{fileName:t,owner:r,content:a,ambiguityPercent:n,warningLines:i=[],selectedLine:o=null,onLineClick:d,onRunLinter:c,sidePanel:x}=e,u=new Set(i);return(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsxs)("header",{className:"h-14 border-b border-border-default flex items-center justify-between px-6 bg-background-layer2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.Z,{className:"text-foreground-muted mr-2",size:18}),(0,s.jsx)("span",{className:"text-foreground-primary font-mono text-sm",children:t}),(0,s.jsx)("span",{className:"mx-2 text-foreground-muted",children:"/"}),(0,s.jsx)("span",{className:"text-foreground-muted text-xs",children:r})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-2 w-24 bg-background-layer3 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-severity-critical-text",style:{width:"".concat(n,"%")}})}),(0,s.jsxs)("span",{className:"text-xs font-mono text-severity-critical-text",children:["AMBIGUITY: ",n,"%"]})]}),(0,s.jsx)("button",{onClick:c,className:"px-4 py-1.5 text-xs font-mono border rounded transition-colors bg-accent-subtle text-accent-text border-accent-primary/50 hover:bg-accent-primary/20",children:"RUN_LINTER"})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,s.jsx)("div",{className:"flex-1 bg-background-layer1 overflow-y-auto p-6",children:a.split("\n").map((e,t)=>{let r=t+1,a=u.has(r),n=o===r;return(0,s.jsxs)("div",{className:"\n            group flex font-mono text-sm leading-6 cursor-pointer\n            ".concat(a?"bg-severity-critical-bg":"","\n            ").concat(n?"bg-severity-critical-bg ring-1 ring-severity-critical-border":"","\n            ").concat(a||n?"":"hover:bg-background-layer3","\n          "),onClick:()=>null==d?void 0:d(r),children:[(0,s.jsx)("span",{className:"w-8 text-right mr-4 select-none text-foreground-muted",children:r}),(0,s.jsx)("span",{className:"\n              flex-1\n              ".concat(a?"underline decoration-severity-critical-text/50 decoration-wavy underline-offset-4 text-foreground-primary":"text-foreground-secondary","\n              ").concat(e.startsWith("#")?"font-bold text-accent-text":"","\n            "),children:e||"\xa0"}),a&&(0,s.jsx)("span",{className:"ml-auto mr-2 opacity-0 group-hover:opacity-100 text-severity-critical-text",children:(0,s.jsx)(m.Z,{size:14})})]},t)})}),x&&(0,s.jsx)("div",{className:"w-96 border-l border-border-default flex flex-col",children:x})]})]})},M=e=>0===e.length?100:Math.max(0,100-e.reduce((e,t)=>"open"!==t.status?e:e+("critical"===t.severity?20:10),0));var Z=r(8896),z=r(5805),W=r(9397),E=r(8893),P=r(8930);let R=[{id:"kpi-1",name:"FY2025 全社売上目標",description:"年間売上の達成率",unit:"%",targetType:"higher_is_better",target:100,warningThreshold:80,criticalThreshold:70,createdAt:new Date,updatedAt:new Date},{id:"kpi-2",name:"新規受注額 (ARR)",description:"新規顧客からの年間経常収益",unit:"%",targetType:"higher_is_better",target:100,warningThreshold:85,criticalThreshold:75,parentId:"kpi-1",ownerId:"owner-1",createdAt:new Date,updatedAt:new Date},{id:"kpi-3",name:"解約率 (Churn)",description:"月次解約率",unit:"%",targetType:"lower_is_better",target:1,warningThreshold:1.5,criticalThreshold:2,parentId:"kpi-1",ownerId:"owner-2",createdAt:new Date,updatedAt:new Date}],V=[{id:"owner-1",name:"VP of Sales",email:"sales@example.com",role:"Vice President",department:"Sales"},{id:"owner-2",name:"VP of CS",email:"cs@example.com",role:"Vice President",department:"Customer Success"},{id:"owner-3",name:"M. Tanaka",email:"tanaka@example.com",role:"Manager",department:"Enterprise Sales"}],B=e=>{let{className:t=""}=e,[r,n]=(0,a.useState)("kpi"),[i]=(0,a.useState)(R),[l]=(0,a.useState)(V);return(0,s.jsxs)("div",{className:"h-full flex flex-col bg-background-base ".concat(t),children:[(0,s.jsxs)("header",{className:"p-6 border-b border-border-default bg-background-layer1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(d.Z,{className:"w-6 h-6 text-accent-text"}),(0,s.jsx)("h1",{className:"text-2xl font-light text-foreground-primary",children:"設定"})]}),(0,s.jsx)("p",{className:"text-foreground-muted text-sm",children:"KPI定義、オーナー、閾値などのマスタデータを管理します"})]}),(0,s.jsxs)("div",{className:"flex border-b border-border-default bg-background-layer1",children:[(0,s.jsx)(O,{active:"kpi"===r,onClick:()=>n("kpi"),icon:(0,s.jsx)(Z.Z,{size:18}),children:"KPI定義"}),(0,s.jsx)(O,{active:"owners"===r,onClick:()=>n("owners"),icon:(0,s.jsx)(z.Z,{size:18}),children:"オーナー管理"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:"kpi"===r?(0,s.jsx)(G,{definitions:i,owners:l}):(0,s.jsx)(F,{owners:l})})]})},O=e=>{let{active:t,onClick:r,icon:a,children:n}=e;return(0,s.jsxs)("button",{onClick:r,className:"flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors ".concat(t?"border-accent-primary text-accent-text":"border-transparent text-foreground-muted hover:text-foreground-primary"),children:[a,n]})},G=e=>{let{definitions:t,owners:r}=e,a=e=>{if(!e)return"-";let t=r.find(t=>t.id===e);return(null==t?void 0:t.name)||"-"},n=t.filter(e=>!e.parentId),i=e=>t.filter(t=>t.parentId===e);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-foreground-primary",children:"KPI定義一覧"}),(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg bg-accent-primary text-foreground-inverse hover:bg-accent-hover transition-colors",children:[(0,s.jsx)(W.Z,{size:16}),"新規KPIを追加"]})]}),(0,s.jsx)("div",{className:"bg-background-layer1 rounded-xl border border-border-default overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border-default bg-background-layer2",children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground-muted uppercase tracking-wider",children:"KPI名"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground-muted uppercase tracking-wider",children:"単位"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground-muted uppercase tracking-wider",children:"目標"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground-muted uppercase tracking-wider",children:"警告閾値"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-foreground-muted uppercase tracking-wider",children:"責任者"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-foreground-muted uppercase tracking-wider",children:"操作"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-border-subtle",children:n.map(e=>(0,s.jsx)(K,{kpi:e,children:i(e.id),getOwnerName:a,level:0},e.id))})]})})]})},K=e=>{let{kpi:t,children:r,getOwnerName:n,level:i}=e,[l,o]=(0,a.useState)(!0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("tr",{className:"hover:bg-background-layer2 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",style:{paddingLeft:"".concat(24*i,"px")},children:[r.length>0&&(0,s.jsx)("button",{onClick:()=>o(!l),className:"p-0.5 hover:bg-background-layer3 rounded transition-colors",children:(0,s.jsx)(f.Z,{size:16,className:"text-foreground-muted transition-transform ".concat(l?"rotate-90":"")})}),0===r.length&&(0,s.jsx)("span",{className:"w-5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground-primary",children:t.name}),t.description&&(0,s.jsx)("p",{className:"text-xs text-foreground-muted",children:t.description})]})]})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:t.unit}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:void 0!==t.target?"".concat(t.target).concat(t.unit):"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:void 0!==t.warningThreshold?"".concat(t.warningThreshold).concat(t.unit):"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-foreground-secondary",children:n(t.ownerId)}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{className:"p-1.5 text-foreground-muted hover:text-accent-text hover:bg-background-layer3 rounded transition-colors",children:(0,s.jsx)(E.Z,{size:14})}),(0,s.jsx)("button",{className:"p-1.5 text-foreground-muted hover:text-severity-critical-text hover:bg-severity-critical-bg rounded transition-colors",children:(0,s.jsx)(P.Z,{size:14})})]})})]}),l&&r.map(e=>(0,s.jsx)(K,{kpi:e,children:[],getOwnerName:n,level:i+1},e.id))]})},F=e=>{let{owners:t}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-foreground-primary",children:"オーナー一覧"}),(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg bg-accent-primary text-foreground-inverse hover:bg-accent-hover transition-colors",children:[(0,s.jsx)(W.Z,{size:16}),"オーナーを追加"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,s.jsxs)("div",{className:"p-4 bg-background-layer1 rounded-xl border border-border-default hover:border-border-active transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-accent-subtle flex items-center justify-center text-accent-text font-medium",children:e.name.charAt(0)}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{className:"p-1.5 text-foreground-muted hover:text-accent-text hover:bg-background-layer3 rounded transition-colors",children:(0,s.jsx)(E.Z,{size:14})}),(0,s.jsx)("button",{className:"p-1.5 text-foreground-muted hover:text-severity-critical-text hover:bg-severity-critical-bg rounded transition-colors",children:(0,s.jsx)(P.Z,{size:14})})]})]}),(0,s.jsx)("h3",{className:"font-medium text-foreground-primary mb-1",children:e.name}),e.role&&(0,s.jsx)("p",{className:"text-sm text-foreground-secondary",children:e.role}),e.department&&(0,s.jsx)("p",{className:"text-xs text-foreground-muted mt-1",children:e.department}),e.email&&(0,s.jsx)("p",{className:"text-xs text-accent-text mt-2",children:e.email})]},e.id))})]})};var U=r(3229),Y=r(1047),q=r(401),H=r(9322);let Q=[{id:"kpi-1",name:"FY2025 全社売上目標",unit:"%",targetType:"higher_is_better",target:100,warningThreshold:80,criticalThreshold:70,createdAt:new Date,updatedAt:new Date},{id:"kpi-2",name:"新規受注額 (ARR)",unit:"%",targetType:"higher_is_better",target:100,warningThreshold:85,criticalThreshold:75,parentId:"kpi-1",createdAt:new Date,updatedAt:new Date},{id:"kpi-3",name:"Enterprise Sales",unit:"%",targetType:"higher_is_better",target:100,warningThreshold:80,criticalThreshold:70,parentId:"kpi-2",createdAt:new Date,updatedAt:new Date},{id:"kpi-4",name:"SMB Sales",unit:"%",targetType:"higher_is_better",target:100,warningThreshold:85,criticalThreshold:75,parentId:"kpi-2",createdAt:new Date,updatedAt:new Date},{id:"kpi-5",name:"解約率 (Churn)",unit:"%",targetType:"lower_is_better",target:1,warningThreshold:1.5,criticalThreshold:2,parentId:"kpi-1",createdAt:new Date,updatedAt:new Date}],X=[{id:"1",kpiDefinitionId:"kpi-1",period:"2025-W02",actualValue:82,enteredAt:new Date},{id:"2",kpiDefinitionId:"kpi-2",period:"2025-W02",actualValue:76,enteredAt:new Date},{id:"3",kpiDefinitionId:"kpi-3",period:"2025-W02",actualValue:65,enteredAt:new Date},{id:"4",kpiDefinitionId:"kpi-4",period:"2025-W02",actualValue:92,enteredAt:new Date},{id:"5",kpiDefinitionId:"kpi-5",period:"2025-W02",actualValue:1.2,enteredAt:new Date}],J=e=>{let{className:t=""}=e,[r,n]=(0,a.useState)("2025-W03"),[i,l]=(0,a.useState)({}),[d,c]=(0,a.useState)(new Set),x=(e,t)=>{l(r=>({...r,[e]:t})),c(t=>{let r=new Set(t);return r.delete(e),r})},u=e=>{c(t=>new Set(t).add(e))},m=(e,t)=>"lower_is_better"===e.targetType?t<=(e.target||0)?"healthy":t<=(e.warningThreshold||0)?"warning":"critical":t>=(e.target||0)?"healthy":t>=(e.warningThreshold||0)?"warning":"critical",b=e=>{let t=X.find(t=>t.kpiDefinitionId===e);return null==t?void 0:t.actualValue};return(0,s.jsxs)("div",{className:"h-full flex flex-col bg-background-base ".concat(t),children:[(0,s.jsx)("header",{className:"p-6 border-b border-border-default bg-background-layer1",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(o.Z,{className:"w-6 h-6 text-accent-text"}),(0,s.jsx)("h1",{className:"text-2xl font-light text-foreground-primary",children:"データ入力"})]}),(0,s.jsx)("p",{className:"text-foreground-muted text-sm",children:"KPI実績値を入力します。入力後、自動的に曖昧性チェックが実行されます。"})]}),(0,s.jsxs)("button",{onClick:()=>{c(new Set(Q.map(e=>e.id)))},className:"flex items-center gap-2 px-6 py-2.5 text-sm font-bold rounded-lg bg-accent-primary text-foreground-inverse hover:bg-accent-hover transition-colors",children:[(0,s.jsx)(U.Z,{size:18}),"すべて保存"]})]})}),(0,s.jsx)("div",{className:"p-4 border-b border-border-default bg-background-layer2",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground-secondary",children:"対象期間:"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:r,onChange:e=>n(e.target.value),className:"appearance-none pl-10 pr-10 py-2 text-sm rounded-lg bg-background-layer1 border border-border-default text-foreground-primary focus:outline-none focus:border-accent-primary focus:ring-2 focus:ring-accent-primary/20 cursor-pointer",children:[(0,s.jsx)("option",{value:"2025-W03",children:"2025年 第3週 (1/13 - 1/19)"}),(0,s.jsx)("option",{value:"2025-W02",children:"2025年 第2週 (1/6 - 1/12)"}),(0,s.jsx)("option",{value:"2025-W01",children:"2025年 第1週 (12/30 - 1/5)"})]}),(0,s.jsx)(Y.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-foreground-muted pointer-events-none"}),(0,s.jsx)(h.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-foreground-muted pointer-events-none"})]})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto space-y-4",children:Q.map(e=>{let t=i[e.id],r=b(e.id),a=t?parseFloat(t):void 0,n=void 0!==a?m(e,a):void 0,l=d.has(e.id),o=e.parentId?e.parentId.includes("kpi-2")?2:1:0;return(0,s.jsx)("div",{className:"p-4 bg-background-layer1 rounded-xl border border-border-default hover:border-border-active transition-colors",style:{marginLeft:"".concat(24*o,"px")},children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-medium text-foreground-primary truncate",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-xs text-foreground-muted",children:[(0,s.jsxs)("span",{children:["目標: ",e.target,e.unit]}),void 0!==r&&(0,s.jsxs)("span",{children:["前週: ",r,e.unit]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"number",step:"0.1",value:t||"",onChange:t=>x(e.id,t.target.value),placeholder:(null==r?void 0:r.toString())||"0",className:"w-32 px-4 py-2.5 text-right text-lg font-medium rounded-lg border-2 bg-background-base text-foreground-primary focus:outline-none focus:ring-2 transition-all ".concat("critical"===n?"border-severity-critical-border focus:border-severity-critical-text focus:ring-severity-critical-border/20":"warning"===n?"border-severity-warning-border focus:border-severity-warning-text focus:ring-severity-warning-border/20":"healthy"===n?"border-severity-success-border focus:border-severity-success-text focus:ring-severity-success-border/20":"border-border-default focus:border-accent-primary focus:ring-accent-primary/20")}),(0,s.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-foreground-muted",children:e.unit})]}),n&&(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("critical"===n?"bg-severity-critical-bg text-severity-critical-text":"warning"===n?"bg-severity-warning-bg text-severity-warning-text":"bg-severity-success-bg text-severity-success-text"),children:"healthy"===n?(0,s.jsx)(q.Z,{size:16}):(0,s.jsx)(H.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>u(e.id),disabled:!t||l,className:"px-4 py-2 text-sm font-medium rounded-lg border-2 transition-all ".concat(l?"bg-severity-success-bg text-severity-success-text border-severity-success-border":t?"bg-accent-subtle text-accent-text border-accent-primary hover:bg-accent-primary hover:text-foreground-inverse":"bg-background-layer3 text-foreground-muted border-border-default cursor-not-allowed"),children:l?(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(q.Z,{size:14}),"保存済"]}):"保存"})]})]})},e.id)})})})]})},$={id:"root",label:"FY2025 全社売上目標",value:"82%",status:"warning",owner:"CEO",ambiguityScore:12,children:[{id:"sales",label:"新規受注額 (ARR)",value:"76%",status:"critical",owner:"VP of Sales",ambiguityScore:45,children:[{id:"ent_sales",label:"Enterprise Sales",value:"65%",status:"critical",owner:"M. Tanaka",ambiguityScore:68,isTarget:!0},{id:"smb_sales",label:"SMB Sales",value:"92%",status:"healthy",owner:"S. Sato",ambiguityScore:5}]},{id:"churn",label:"解約率 (Churn)",value:"1.2%",status:"warning",owner:"VP of CS",ambiguityScore:24,children:[{id:"onboarding",label:"Onboarding Success",value:"88%",status:"healthy",owner:"K. Suzuki",ambiguityScore:8},{id:"product_bug",label:"Product Quality",value:"N/A",status:"warning",owner:"PdM Group",ambiguityScore:35}]}]},ee={reportId:"ent-sales-weekly-001",items:[{id:"1",pattern:"shallow_analysis",severity:"critical",message:"要因分析が定性的すぎます。「厳しい」「攻勢」「反応が鈍い」を定量化してください。",rationale:"定性的な表現のみで、具体的な数値や比較データがありません。",suggestion:"例: 競合A社の値引き率、商談化率の前月比増減などを提示",location:{range:{start:4,end:4,text:"今週は全体的に厳しい状況が続いている。"}},status:"open",detectedAt:new Date},{id:"2",pattern:"lack_of_quantification",severity:"warning",message:"「概ね順調」「見込み」の定義が不明瞭です。フェーズ定義と受注確率(%)を記載してください。",rationale:"「順調」は主観的な表現であり、客観的な評価基準が示されていません。",suggestion:"例: Phase 4 (Selection), Probability 80%",location:{range:{start:9,end:9,text:"A社については、概ね順調に進んでおり"}},status:"open",detectedAt:new Date},{id:"3",pattern:"unclear_action",severity:"critical",message:"「気合い」「リカバリー」はアクションではありません。Who/When/Whatに分解してください。",rationale:"アクションプランとして具体性に欠け、実行可能性が判断できません。",suggestion:"例: メンバー3名が、金曜日までに、休眠リスト50件に対し架電を行う",location:{range:{start:14,end:14,text:"チーム全体で気合いを入れ直し"}},status:"open",detectedAt:new Date}],score:45,patternCounts:{shallow_analysis:1,missing_coverage:0,lack_of_quantification:1,unclear_action:1,fact_interpretation_mixing:0},auditedAt:new Date,status:"completed"};function et(){let[e,t]=(0,a.useState)("dashboard"),[r,n]=(0,a.useState)(null),i=function(e){var t;let[r,s]=(0,a.useState)(null!==(t=null==e?void 0:e.items)&&void 0!==t?t:[]),n=(0,a.useMemo)(()=>M(r),[r]),[i,l]=(0,a.useState)({status:"open",pattern:"all",severity:"all"}),[o,d]=(0,a.useState)(!1),c=(0,a.useMemo)(()=>r.filter(e=>(!i.status||"all"===i.status||e.status===i.status)&&(!i.pattern||"all"===i.pattern||e.pattern===i.pattern)&&(!i.severity||"all"===i.severity||e.severity===i.severity)),[r,i]),x=(0,a.useMemo)(()=>r.filter(e=>"open"===e.status).length,[r]),u=(0,a.useCallback)(async(e,t)=>{d(!0);try{s(r=>r.map(r=>r.id===e?{...r,status:"dismissed",dismissReason:t}:r))}finally{d(!1)}},[]);return{items:c,allItems:r,openCount:x,score:n,filter:i,isProcessing:o,setFilter:l,dismiss:u,resolve:(0,a.useCallback)(async e=>{d(!0);try{s(t=>t.map(t=>t.id===e?{...t,status:"resolved",resolvedAt:new Date}:t))}finally{d(!1)}},[]),reopen:(0,a.useCallback)(e=>{s(t=>t.map(t=>t.id===e?{...t,status:"open",resolvedAt:void 0,dismissReason:void 0}:t))},[]),updateResult:(0,a.useCallback)(e=>{s(e.items)},[])}}(ee),l=(0,a.useMemo)(()=>i.allItems.filter(e=>"open"===e.status).map(e=>e.location.range.start),[i.allItems]);return(0,s.jsxs)("div",{className:"flex h-screen bg-background-base text-foreground-primary overflow-hidden",children:[(0,s.jsx)(c,{currentView:e,onNavigate:t}),(0,s.jsxs)("main",{className:"flex-1 overflow-hidden",children:["dashboard"===e&&(0,s.jsx)(N,{kpiData:$,onNavigate:t}),"editor"===e&&(0,s.jsx)(L,{fileName:"Enterprise_Sales_Weekly.md",owner:"M. Tanaka",content:"# Enterprise Sales 週次報告 (2025-10-12)\n\n## 進捗状況\n今週は全体的に厳しい状況が続いている。\n主な要因としては、競合他社の攻勢が強まっていることと、\n季節性の要因で顧客の反応が鈍いことが挙げられる。\n\n## 見込み案件\nA社については、概ね順調に進んでおり、来月には受注できる見込み。\nB社は担当者が忙しそうで連絡がつきにくいが、引き続きフォローする。\nC社はロストの可能性が高い。\n\n## 来週の予定\nチーム全体で気合いを入れ直し、架電数を増やしてリカバリーを図る。\n既存顧客へのアップセルも検討中。",ambiguityPercent:100-i.score,warningLines:l,selectedLine:r,onLineClick:e=>{n(e)},sidePanel:(0,s.jsx)(C,{auditLog:i,title:"NEUMANN_AUDIT_LOG",className:"h-full rounded-none border-0"})}),"data-entry"===e&&(0,s.jsx)(J,{}),"settings"===e&&(0,s.jsx)(B,{})]})]})}}},function(e){e.O(0,[453,971,117,744],function(){return e(e.s=7040)}),_N_E=e.O()}]);